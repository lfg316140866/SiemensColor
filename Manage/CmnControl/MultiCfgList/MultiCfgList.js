CmnMis_UI_Control_MultiCfgList_Version = "1.0", function () { var a = CmnMis.UI.Control; a.MultiCfgList = function (a, b) { var c, d, e, f, g; Cmn.Object.Inherit(this, CmnMis.UI.Control.BasControl, [a, b]), c = this, c.Type = "MultiCfgList", c.KeyName = a, c.ControlCfg = c.InitControlConfig(Cmn.Extend(c.ControlCfg, b)), c.GetInitHtml = function () { return "" }, d = null, e = null, f = function (a) { return CmnMis.UI.Control.GetValueList(a) }, g = function (a, b) { var f = c.ControlDom.find(CmnMis.UI.Control.Selector.CtlContent); d = $("<div class='cmn-MultiCfgListCtl-CfgItem' style='width:100%;border:1px solid #e6e6e6;margin-top: 3px;'><div class='cmn-MultiCfgListCtl-CfgTitle' style='width:100%;height:25px;text-align: center; background:#e6e6e6;cursor: pointer;line-height:25px;  position: relative;' ><b>新增配置</b><b class=\"cmn-MultiCfgListCtl-DelItem\" style=\" position: absolute; right: 6px; width: 20px; top: 2px; height: 20px; display: block;border-radius: 20px; color: #fff; background: #474545; text-align: center; line-height: 20px; \">X</b></div><div class='cmn-MultiCfgListCtl-CfgFieldContainer' style='width:100%;' /></div></div>"), c.ControlDom.css({ height: "auto" }), c.ControlDom.find(CmnMis.UI.Control.Selector.CtlContent).css({ height: "auto", "float": "none", display: "inline-block" }), Cmn.IsType(a, "array") && ($.each(a, function (a, e) { var f, g, h; if (Cmn.IsType(e, "object")) for (f in e) g = e[f], h = CmnMis.UI.Control.NewControl(g.Type, f, { Width: c.ControlCfg.Width - 150, Height: "Text" == g.Type ? 25 : 70, Layout: { DescWidth: 120 }, OptionList: Cmn.IsType(g.Val, "array") ? g.Val : void 0 }), h.AppendTo(d.find(".cmn-MultiCfgListCtl-CfgFieldContainer").last()), h.SetColDesc(g.Desc), h.InitControl(), h.SetValue(b[f] || "") }), 0 == f.find(".cmn-MultiCfgListCtl-CfgFieldAdd").length && (f.append("<button class='cmn-MultiCfgListCtl-CfgFieldAdd' style='width:101%;height:25px;margin:0px; cursor: pointer;border:1px solid #e6e6e6;'>添加</button>"), c.ControlDom.undelegate(".cmn-MultiCfgListCtl-CfgFieldAdd", "click").delegate(".cmn-MultiCfgListCtl-CfgFieldAdd", "click", function () { f.find(".cmn-MultiCfgListCtl-CfgFieldContainer").hide(), g(a, {}) }), c.ControlDom.undelegate(".cmn-MultiCfgListCtl-DelItem", "click").delegate(".cmn-MultiCfgListCtl-DelItem", "click", function () { $(this).parents(".cmn-MultiCfgListCtl-CfgItem").remove() }), c.ControlDom.undelegate(".cmn-MultiCfgListCtl-CfgTitle", "click").delegate(".cmn-MultiCfgListCtl-CfgTitle", "click", function () { $(this).siblings(".cmn-MultiCfgListCtl-CfgFieldContainer").is(":visible") ? $(this).siblings(".cmn-MultiCfgListCtl-CfgFieldContainer").hide() : (f.find(".cmn-MultiCfgListCtl-CfgFieldContainer").hide(), $(this).siblings(".cmn-MultiCfgListCtl-CfgFieldContainer").show()) })), d.insertBefore(f.find(".cmn-MultiCfgListCtl-CfgFieldAdd")), e = d) }, c.InitControl = function () { g(c.ControlCfg.CfgList, {}) }, c.Init = function () { c.SetValue("") }, c.GetValue = function () { var a = []; return c.ControlDom.find(".cmn-MultiCfgListCtl-CfgItem").each(function () { a.push(f($(this))) }), a }, c.SetValue = function (a) { if (Cmn.IsType(a, "array")) for (var b = 0; b < a.length; b++) g(c.ControlCfg.CfgList, a[b]); else c.ControlDom.find(CmnMis.UI.Control.Selector.CtlContent).find(".cmn-MultiCfgListCtl-CfgItem").remove() } } }();