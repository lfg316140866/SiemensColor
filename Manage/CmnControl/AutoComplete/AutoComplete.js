CmnMis_UI_Control_AutoComplete_Version = "2.2.3", function () { var a = CmnMis.UI.Control; a.AutoComplete = function (b, c) { Cmn.Object.Inherit(this, a.SelectBas, [b, c]); var d = this, e = {}; d.Type = "AutoComplete", d.SetCfgDescCfg({ DisplayFieldCount: { Type: "Text", Desc: "显示字段的个数sql", Val: "2" }, Limit: { Type: "Text", Desc: "显示的数据条数", Val: "10" } }), d.GetInitHtml = function () { return '<input type="text" style="width:100%;height:100%;border:none; outline: none; text-indent: 5px;" />' }, d.OnInitControl.Remove().Add(function () { d.ControlDom.find(a.Selector.CtlContent).css({ border: " 1px solid #e6e6e6" }), Cmn.UI && Cmn.UI.BasPlugin || CmnAjax.Func.LoadJs(Cmn.Func.GetRoot() + "Js/CmnUI/CmnUI.js"), Cmn.UI && Cmn.UI.AutoComplete || CmnAjax.Func.LoadJs(Cmn.Func.GetRoot() + "Js/CmnUI/AutoComplete/AutoComplete.js"), d.AutoComplete = new Cmn.UI.AutoComplete(d.ControlDom.find("input"), Cmn.Func.GetRoot() + "Itf/CSharp/CmnMisItf.aspx?method=ExecSql"), d.AutoComplete.SerializeParam = function (a) { return { param: a, Limit: d.ControlCfg.Limit, DisplayFieldCount: d.ControlCfg.DisplayFieldCount, ExecSql: d.ControlCfg.FillSql } }, d.AutoComplete.OnDataLoadComplete.Add(function (a) { d.OnLoadDataComplete.Trigger([a]) }, "cmn-Control-AutoComplete-OnDataLoadComplete"), d.AutoComplete.OnChange.Add(function (a, b, c) { e = c, d.OnChange.Trigger([a, b, c]) }, "cmn-Control-AutoComplete-OnChange") }), d.ReLoadData = function (a) { d.AutoComplete.SerializeParam = function (b) { return { param: b, where: a, Limit: d.ControlCfg.Limit, DisplayFieldCount: d.ControlCfg.DisplayFieldCount, ExecSql: d.ControlCfg.FillSql } } }, d.GetDescFieldName = function () { var a = "", b = 0; return $.each(d.GetDataByFillSqlFieldName(), function (c) { return 2 == ++b ? (a = c, !1) : void 0 }), a }, d.GetDesc = function () { return d.GetDataByFillSqlFieldName(d.GetDescFieldName()) }, d.GetDataByFillSqlFieldName = function (a) { return e && _RelationalDataList[d.GetValue()] ? a ? e[a] || {} : e || {} : {} }, d.GetValue = function () { return d.AutoComplete.GetValue() }, d.SetValue = function (a) { a ? CmnAjax.PostData(InterfaceUrl + "?method=ExecSql", { ExecSql: d.ControlCfg.FillSql, param: a, Limit: d.ControlCfg.Limit, DisplayFieldCount: d.ControlCfg.DisplayFieldCount }, function (a) { d.AutoComplete.SetValue(a) }) : d.AutoComplete.SetValue() } } }();